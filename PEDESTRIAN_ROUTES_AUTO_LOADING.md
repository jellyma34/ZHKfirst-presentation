# üö∂ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –ø–µ—à–µ—Ö–æ–¥–æ–≤

**–î–∞—Ç–∞:** 7 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.8  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –ø–µ—à–µ—Ö–æ–¥–æ–≤ –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö **"–ü–ª–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è"** –∏ **"–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"**.

–ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞ **"–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"** –º–∞—Ä—à—Ä—É—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–∞–ø–æ–∫ —Å –ø–ª–∞–Ω–∞–º–∏, –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —ç—Ç–∞–∂–µ–π.

---

## üîπ –õ–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–ü–ª–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è"

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:

1. **–í—ã–±–æ—Ä —ç—Ç–∞–∂–∞** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ–∫—Ü–∏—é –∏ —ç—Ç–∞–∂
2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞** ‚Üí –í–∫–ª—é—á–∞–µ—Ç "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** ‚Üí –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç —Ñ–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –ø–∞–ø–∫–µ –ø–ª–∞–Ω–∞
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** ‚Üí –ú–∞—Ä—à—Ä—É—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –ø–ª–∞–Ω–∞ —ç—Ç–∞–∂–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—É—Ç–µ–π:

```
PUBLIC/
‚îú‚îÄ‚îÄ plans/
‚îÇ   ‚îú‚îÄ‚îÄ floor-2-new/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes-underground-ground.json
‚îÇ   ‚îú‚îÄ‚îÄ floor 1/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes-general-floor-1.json
‚îÇ   ‚îú‚îÄ‚îÄ section-1-floor-2/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes-section1-floor-2.json
‚îÇ   ‚îú‚îÄ‚îÄ section-1-floor-3/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes-section1-floor-3-10.json
‚îÇ   ‚îú‚îÄ‚îÄ section-1-floor-11/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes-section1-floor-11-14.json
‚îÇ   ‚îú‚îÄ‚îÄ section-2-floor-3/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes-section2-floor-2.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes-section2-floor-3-10.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes-section2-floor-11-14.json
```

### –ú–∞–ø–ø–∏–Ω–≥ ID —ç—Ç–∞–∂–µ–π:

| ID —ç—Ç–∞–∂–∞ | –ü–∞–ø–∫–∞ –ø–ª–∞–Ω–∞ | –§–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
|----------|-------------|----------------|
| `underground-ground` | `/plans/floor-2-new` | `routes-underground-ground.json` |
| `general-floor-1` | `/plans/floor 1` | `routes-general-floor-1.json` |
| `section1-floor-2` | `/plans/section-1-floor-2` | `routes-section1-floor-2.json` |
| `section1-floor-3-10` | `/plans/section-1-floor-3` | `routes-section1-floor-3-10.json` |
| `section1-floor-11-14` | `/plans/section-1-floor-11` | `routes-section1-floor-11-14.json` |
| `section2-floor-2` | `/plans/section-2-floor-3` | `routes-section2-floor-2.json` |
| `section2-floor-3-10` | `/plans/section-2-floor-3` | `routes-section2-floor-3-10.json` |
| `section2-floor-11-14` | `/plans/section-2-floor-3` | `routes-section2-floor-11-14.json` |

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```jsx
// PlanningSolutions.jsx, —Å—Ç—Ä–æ–∫–∞ 414-416
{activeLayers.includes('pedestrian') && !isEditorOpen && (
  <PedestrianLayer planId={selectedFloor} />
)}
```

–ü—Ä–∏ —Å–º–µ–Ω–µ —ç—Ç–∞–∂–∞ `selectedFloor` –º–µ–Ω—è–µ—Ç—Å—è, –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏.

---

## üîπ –õ–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:

1. **–û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–∞–∑–¥–µ–ª–∞** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞** ‚Üí –í–∫–ª—é—á–∞–µ—Ç "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** ‚Üí –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç —Ñ–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–ø–ª–∞–Ω–∞
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** ‚Üí –ü—Ä–æ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—É—Ç–µ–π:

```
PUBLIC/
‚îú‚îÄ‚îÄ genplan/
‚îÇ   ‚îî‚îÄ‚îÄ routes-genplan.json
‚îú‚îÄ‚îÄ plans/
‚îÇ   ‚îî‚îÄ‚îÄ genplan/
‚îÇ       ‚îî‚îÄ‚îÄ routes-genplan (2).json
```

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–∞–π–ª–æ–≤ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):

1. `/genplan/routes-genplan.json` ‚úÖ
2. `/genplan/routes-genplan (2).json`
3. `/genplan/routes-genplan (3).json`
4. `/routes/genplan.json` (fallback)

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```jsx
// Landscaping.jsx, —Å—Ç—Ä–æ–∫–∞ 125-127
{activeLayers.includes('–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤') && !isEditorOpen && (
  <PedestrianLayer planId="genplan" />
)}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π PedestrianLayer.jsx

#### –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:

```javascript
const [customRoutes, setCustomRoutes] = useState(null);
const [isLoading, setIsLoading] = useState(true);
const [notFound, setNotFound] = useState(false);
```

#### –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ genplan:

```javascript
const tryLoadGenplanVariants = async () => {
  const variants = [
    '/genplan/routes-genplan.json',
    '/genplan/routes-genplan (2).json',
    '/genplan/routes-genplan (3).json',
    '/routes/genplan.json'
  ];

  for (const path of variants) {
    try {
      const response = await fetch(path);
      if (response.ok) {
        const routes = await response.json();
        console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è genplan –∏–∑: ${path}`);
        return routes;
      }
    } catch (error) {
      // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç
    }
  }
  
  return null;
};
```

#### –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:

```javascript
useEffect(() => {
  const loadRoutes = async () => {
    setIsLoading(true);
    setNotFound(false);
    
    // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–ª–∞–Ω–∞
    setCustomRoutes(null);
    
    try {
      // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º localStorage
      const localData = localStorage.getItem(`routes-${planId}`);
      if (localData) {
        const routes = JSON.parse(localData);
        setCustomRoutes(routes);
        setIsLoading(false);
        setNotFound(false);
        return;
      }

      // 2. –î–ª—è genplan –ø—Ä–æ–±—É–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π
      if (planId === 'genplan') {
        const routes = await tryLoadGenplanVariants();
        if (routes && routes.length > 0) {
          setCustomRoutes(routes);
          setIsLoading(false);
          setNotFound(false);
          return;
        }
      }

      // 3. –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø–∞–ø–∫–∏ –ø–ª–∞–Ω–∞
      const planPath = getRoutesPathForPlan(planId);
      let response = await fetch(planPath);
      
      // 4. Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –ø—É—Ç—å
      if (!response.ok) {
        response = await fetch(`/routes/${planId}.json`);
      }
      
      // 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      if (response.ok) {
        const routes = await response.json();
        if (routes && routes.length > 0) {
          setCustomRoutes(routes);
          setNotFound(false);
        } else {
          setNotFound(true);
        }
      } else {
        setNotFound(true);
      }
    } catch (error) {
      setNotFound(true);
    } finally {
      setIsLoading(false);
    }
  };

  loadRoutes();
  
  // Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ —Å–º–µ–Ω–µ planId
  return () => {
    if (animationFrameRef.current) {
      cancelAnimationFrame(animationFrameRef.current);
    }
    walkersRef.current = [];
  };
}, [planId]);
```

### 2. –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏:

```jsx
{isLoading && (
  <div style={{
    position: 'absolute',
    top: '20px',
    left: '50%',
    transform: 'translateX(-50%)',
    background: 'rgba(95, 117, 141, 0.95)',
    color: 'white',
    padding: '12px 24px',
    borderRadius: '12px',
    fontSize: '14px',
    fontWeight: '500',
    fontFamily: 'Inter, sans-serif',
    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',
    zIndex: 200,
    pointerEvents: 'auto',
    backdropFilter: 'blur(8px)'
  }}>
    üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤...
  </div>
)}
```

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏:

```jsx
{!isLoading && notFound && (
  <div style={{
    position: 'absolute',
    top: '20px',
    left: '50%',
    transform: 'translateX(-50%)',
    background: 'rgba(255, 193, 7, 0.95)',
    color: '#2C3E50',
    padding: '12px 24px',
    borderRadius: '12px',
    fontSize: '14px',
    fontWeight: '500',
    fontFamily: 'Inter, sans-serif',
    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',
    zIndex: 200,
    pointerEvents: 'auto',
    backdropFilter: 'blur(8px)',
    textAlign: 'center',
    maxWidth: '320px'
  }}>
    ‚ö†Ô∏è –ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
  </div>
)}
```

---

## üìÅ –§–æ—Ä–º–∞—Ç JSON —Ñ–∞–π–ª–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:

```json
[
  {
    "id": "route-1",
    "points": [
      { "x": 120, "y": 170 },
      { "x": 250, "y": 170 },
      { "x": 360, "y": 170 },
      { "x": 510, "y": 170 },
      { "x": 660, "y": 170 },
      { "x": 900, "y": 170 },
      { "x": 1060, "y": 170 }
    ]
  },
  {
    "id": "route-2",
    "points": [
      { "x": 90, "y": 600 },
      { "x": 240, "y": 520 },
      { "x": 380, "y": 450 },
      { "x": 520, "y": 430 }
    ]
  }
]
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ö–∞–∂–¥—ã–π –º–∞—Ä—à—Ä—É—Ç –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `id`
- –ú–∞—Å—Å–∏–≤ `points` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–µ–∫
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–µ viewBox SVG: `0 0 1200 675`
- –ú–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç

---

## ‚úÖ –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)

1. ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `fetch()`
2. ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç"
3. ‚úÖ **–û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–ª–∞–Ω–∞** - —Å—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
4. ‚úÖ **–ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è** - —è—Ä–∫–∏–µ –∂–µ–ª—Ç—ã–µ –ª–∏–Ω–∏–∏ —Å –±–µ–ª–æ–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–π –ø–æ–¥–ª–æ–∂–∫–æ–π
5. ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤** - –æ–¥–∏–Ω JSON –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤
6. ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è genplan

---

## üé® –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ

### –ú–∞—Ä—à—Ä—É—Ç—ã:

- **–¶–≤–µ—Ç:** –Ø—Ä–∫–∏–π –∂–µ–ª—Ç—ã–π `#FFD700`
- **–¢–æ–ª—â–∏–Ω–∞:** 4px
- **–ü–æ–¥–ª–æ–∂–∫–∞:** –ë–µ–ª–∞—è, —Ç–æ–ª—â–∏–Ω–∞ 8px, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è
- **–ê–Ω–∏–º–∞—Ü–∏—è:** –ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è —Å –¥–≤–∏–∂–µ–Ω–∏–µ–º
- **–°–≤–µ—á–µ–Ω–∏–µ:** Drop-shadow –¥–ª—è –æ–±—ä–µ–º–∞

### –ü–µ—à–µ—Ö–æ–¥—ã:

- **–§–æ—Ä–º–∞:** –ö—Ä—É–≥–∏ —Ä–∞–¥–∏—É—Å–æ–º 5px
- **–¶–≤–µ—Ç:** –°–ª—É—á–∞–π–Ω—ã–µ —è—Ä–∫–∏–µ –æ—Ç—Ç–µ–Ω–∫–∏ (HSL)
- **–≠—Ñ—Ñ–µ–∫—Ç—ã:** –ü—É–ª—å—Å–∞—Ü–∏—è, —Å–≤–µ—á–µ–Ω–∏–µ
- **–î–≤–∏–∂–µ–Ω–∏–µ:** –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

---

## üîÑ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏

–ú–∞—Ä—à—Ä—É—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:

1. **localStorage** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. **–ü–∞–ø–∫–∞ –ø–ª–∞–Ω–∞** - `/plans/[plan-folder]/routes-[planId].json`
3. **–í–∞—Ä–∏–∞–Ω—Ç—ã genplan** - –¥–ª—è –≥–µ–Ω–ø–ª–∞–Ω–∞ –ø—Ä–æ–±—É—é—Ç—Å—è —Ñ–∞–π–ª—ã —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π
4. **Fallback –ø—É—Ç—å** - `/routes/[planId].json`
5. **–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. **–ü–ª–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–ü–ª–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è"
   - –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —ç—Ç–∞–∂
   - –í–∫–ª—é—á–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

2. **–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
   - –í–∫–ª—é—á–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞ –≥–µ–Ω–ø–ª–∞–Ω–µ

3. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∞–∂–µ–π:**
   - –í —Ä–∞–∑–¥–µ–ª–µ "–ü–ª–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è"
   - –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ –º–µ–∂–¥—É —ç—Ç–∞–∂–∞–º–∏ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ
   - –ú–∞—Ä—à—Ä—É—Ç—ã –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∞–π–ª–∞:**
   - –î–ª—è –ø–ª–∞–Ω–∞ –±–µ–∑ —Ñ–∞–π–ª–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "‚ö†Ô∏è –ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç"

---

## üìù –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
üîç –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤: /plans/section-1-floor-2/routes-section1-floor-2.json
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ —Ñ–∞–π–ª–∞ –¥–ª—è section1-floor-2: 3
```

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ñ–∞–π–ª–∞:

```
üîç –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤: /plans/section-X/routes-sectionX.json
‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤ /plans/section-X/routes-sectionX.json, –ø—Ä–æ–±—É–µ–º /routes/
‚ö†Ô∏è –§–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è section-X
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã –ø–µ—à–µ—Ö–æ–¥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —ç—Ç–∞–∂–µ–π –≤ "–ü–ª–∞–Ω–∏—Ä–æ–≤–æ—á–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö"  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–µ–Ω–ø–ª–∞–Ω–∞ –≤ "–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ"  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–ª–∞–Ω–∞  
‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π (genplan)  
‚úÖ –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±–æ–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤  

---

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** PedestrianLayer.jsx  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** PlanningSolutions.jsx, Landscaping.jsx  
**–§–∞–π–ª—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤:** PUBLIC/plans/*, PUBLIC/genplan/routes-genplan.json

