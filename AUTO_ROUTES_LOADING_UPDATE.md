# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–µ—à–µ—Ö–æ–¥–æ–≤

**–î–∞—Ç–∞:** 07 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.4

## üéØ –¶–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ–¥–≥—Ä—É–∑–∫—É –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –ø–µ—à–µ—Ö–æ–¥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–∂–∞ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–∞–ø–æ–∫ –ø–ª–∞–Ω–æ–≤.

---

## üìê –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–ª–≥–æ—Ä–∏—Ç–º –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   ‚Üì
2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç PedestrianLayer –ø–æ–ª—É—á–∞–µ—Ç planId (ID —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–∂–∞)
   ‚Üì
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è localStorage: –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã?
   ‚îú‚îÄ –î–ê ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ localStorage (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   ‚îî‚îÄ –ù–ï–¢ ‚Üí –ò–¥—ë–º –¥–∞–ª—å—à–µ
   ‚Üì
4. –°—Ç—Ä–æ–∏—Ç—Å—è –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –ø–∞–ø–∫–µ –ø–ª–∞–Ω–∞
   ‚Üì
5. –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø–∞–ø–∫–∏ –ø–ª–∞–Ω–∞
   ‚îú‚îÄ –£–°–ü–ï–• ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã
   ‚îî‚îÄ –û–®–ò–ë–ö–ê ‚Üí –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ /routes/
      ‚îú‚îÄ –£–°–ü–ï–• ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã
      ‚îî‚îÄ –û–®–ò–ë–ö–ê ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
```

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –ú–∞–ø–ø–∏–Ω–≥ ID —ç—Ç–∞–∂–∞ ‚Üí –ü–∞–ø–∫–∞ –ø–ª–∞–Ω–∞:

```javascript
const planFolderMap = {
  'underground-ground': '/plans/floor-2-new',
  'general-floor-1': '/plans/floor 1',
  'section1-floor-2': '/plans/section-1-floor-2',
  'section1-floor-3-10': '/plans/section-1-floor-3',
  'section1-floor-11-14': '/plans/section-1-floor-11',
  'section2-floor-2': '/plans/section-2-floor-3',
  'section2-floor-3-10': '/plans/section-2-floor-3',
  'section2-floor-11-14': '/plans/section-2-floor-3',
  'genplan': '/genplan'
};
```

### –§–æ—Ä–º–∞—Ç –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É:

```
{–ø–∞–ø–∫–∞_–ø–ª–∞–Ω–∞}/routes-{planId}.json

–ü—Ä–∏–º–µ—Ä—ã:
/plans/floor-2-new/routes-underground-ground.json
/plans/floor 1/routes-general-floor-1.json
/plans/section-1-floor-2/routes-section1-floor-2.json
/plans/section-1-floor-3/routes-section1-floor-3-10.json
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –í –ø–∞–ø–∫–∞—Ö –ø–ª–∞–Ω–æ–≤:

1. `PUBLIC/plans/floor-2-new/routes-underground-ground.json`
2. `PUBLIC/plans/floor 1/routes-general-floor-1.json`
3. `PUBLIC/plans/section-1-floor-2/routes-section1-floor-2.json`
4. `PUBLIC/plans/section-1-floor-3/routes-section1-floor-3-10.json`
5. `PUBLIC/plans/section-1-floor-11/routes-section1-floor-11-14.json`
6. `PUBLIC/plans/section-2-floor-3/routes-section2-floor-2.json`
7. `PUBLIC/plans/section-2-floor-3/routes-section2-floor-3-10.json`
8. `PUBLIC/plans/section-2-floor-3/routes-section2-floor-11-14.json`

### –í –ø–∞–ø–∫–µ routes (fallback):

1. `PUBLIC/routes/underground-ground.json`
2. `PUBLIC/routes/general-floor-1.json`
3. `PUBLIC/routes/section1-floor-2.json`
4. `PUBLIC/routes/section1-floor-3-10.json`
5. `PUBLIC/routes/section1-floor-11-14.json`
6. `PUBLIC/routes/section2-floor-2.json`
7. `PUBLIC/routes/section2-floor-3-10.json`
8. `PUBLIC/routes/section2-floor-11-14.json`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### PedestrianLayer.jsx

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É –º–∞—Ä—à—Ä—É—Ç–æ–≤
const getRoutesPathForPlan = (planId) => {
  const planFolderMap = { /* –º–∞–ø–ø–∏–Ω–≥ */ };
  const folder = planFolderMap[planId];
  if (folder) {
    return `${folder}/routes-${planId}.json`;
  }
  return `/routes/${planId}.json`; // Fallback
};
```

**–ò–∑–º–µ–Ω–µ–Ω–æ:**

```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
useEffect(() => {
  const loadRoutes = async () => {
    // 1. localStorage
    const localData = localStorage.getItem(`routes-${planId}`);
    if (localData) { /* –∏—Å–ø–æ–ª—å–∑—É–µ–º */ }
    
    // 2. –ü–∞–ø–∫–∞ –ø–ª–∞–Ω–∞
    const planPath = getRoutesPathForPlan(planId);
    let response = await fetch(planPath);
    
    // 3. Fallback –Ω–∞ /routes/
    if (!response.ok) {
      response = await fetch(`/routes/${planId}.json`);
    }
    
    // 4. –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
    if (!response.ok) {
      setCustomRoutes(null);
    }
  };
}, [planId]);
```

---

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```
1. localStorage               ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (–í—ã—Å—à–∏–π)
   ‚Üì
2. /plans/*/routes-*.json    ‚≠ê‚≠ê‚≠ê‚≠ê  (–í—ã—Å–æ–∫–∏–π)
   ‚Üì
3. /routes/*.json            ‚≠ê‚≠ê‚≠ê   (–°—Ä–µ–¥–Ω–∏–π)
   ‚Üì
4. –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ      ‚≠ê‚≠ê    (–ù–∏–∑–∫–∏–π)
```

---

## üé® Workflow –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞:

```
1. –í—ã–±—Ä–∞—Ç—å —ç—Ç–∞–∂ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–°–µ–∫—Ü–∏—è 1, –≠—Ç–∞–∂ 2")
   ‚Üì
2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   ‚Üì
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–∂–∞
   ‚Üì
4. –ü–µ—à–µ—Ö–æ–¥—ã –¥–≤–∏–≥–∞—é—Ç—Å—è –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∞–∂–µ–π:

```
1. –≠—Ç–∞–∂ A –∞–∫—Ç–∏–≤–µ–Ω, –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
   ‚Üì
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≠—Ç–∞–∂ B
   ‚Üì
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–∞—Ä—à—Ä—É—Ç—ã –≠—Ç–∞–∂–∞ B
   ‚Üì
4. –ü–µ—à–µ—Ö–æ–¥—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:

```
1. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤
   ‚Üì
2. –°–æ–∑–¥–∞—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã
   ‚Üì
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ localStorage
   ‚Üì
4. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
```

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage:
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ localStorage –¥–ª—è section1-floor-2: 2

// –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ø–∞–ø–∫–∏ –ø–ª–∞–Ω–∞:
üîç –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤: /plans/section-1-floor-2/routes-section1-floor-2.json

// –£—Å–ø–µ—Ö:
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ —Ñ–∞–π–ª–∞ –¥–ª—è section1-floor-2: 2

// –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –ø–∞–ø–∫–µ –ø–ª–∞–Ω–∞:
‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤ /plans/.../routes-*.json, –ø—Ä–æ–±—É–µ–º /routes/

// –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ:
‚ÑπÔ∏è –§–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è section1-floor-2, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∂–¥—ã–π —ç—Ç–∞–∂:

1. **–ü–æ–¥–∑–µ–º–Ω–æ-–Ω–∞–¥–∑–µ–º–Ω—ã–π —ç—Ç–∞–∂:**
   - [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å: –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
   - [ ] –í–∏–¥–Ω—ã –ø–µ—à–µ—Ö–æ–¥—ã –Ω–∞ –ø–ª–∞–Ω–µ

2. **–ü–µ—Ä–≤—ã–π —ç—Ç–∞–∂:**
   - [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —ç—Ç–∞–∂
   - [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   - [ ] –ú–∞—Ä—à—Ä—É—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–∂–∞

3. **–°–µ–∫—Ü–∏—è 1, –≠—Ç–∞–∂ 2:**
   - [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —ç—Ç–∞–∂
   - [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   - [ ] –ú–∞—Ä—à—Ä—É—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã

4. **–°–µ–∫—Ü–∏—è 1, –≠—Ç–∞–∂–∏ 3-10:**
   - [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —ç—Ç–∞–∂
   - [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
   - [ ] –ú–∞—Ä—à—Ä—É—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã

5. **–û—Å—Ç–∞–ª—å–Ω—ã–µ —ç—Ç–∞–∂–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ**

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ fallback:

1. –£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª –∏–∑ –ø–∞–ø–∫–∏ –ø–ª–∞–Ω–∞
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `/routes/`
4. –£–¥–∞–ª–∏—Ç–µ –∏ –æ—Ç—Ç—É–¥–∞
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–∂–∞

### 2. **–ì–∏–±–∫–æ—Å—Ç—å** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –ú–∞—Ä—à—Ä—É—Ç—ã –≤ –ø–∞–ø–∫–∞—Ö –ø–ª–∞–Ω–æ–≤
- Fallback –Ω–∞ –æ–±—â—É—é –ø–∞–ø–∫—É /routes/
- –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### 3. **–£–¥–æ–±—Å—Ç–≤–æ** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∞–∂–µ–π = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤ localStorage –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### 4. **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π fallback
- –ù–µ –ª–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ñ–∞–π–ª–æ–≤
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ:
- ‚úÖ –°—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ `/routes/` —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ localStorage –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å
- ‚úÖ –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –ø–∞–ø–∫–∞—Ö –ø–ª–∞–Ω–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ —ç—Ç–∞–∂–∞
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üìö –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç—Ç–∞–∂–∞:

1. –î–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –≤ `getRoutesPathForPlan`:
```javascript
'new-floor-id': '/plans/new-floor-folder'
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤:
```
PUBLIC/plans/new-floor-folder/routes-new-floor-id.json
```

3. –ì–æ—Ç–æ–≤–æ! –ú–∞—Ä—à—Ä—É—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∑—è—Ç—Å—è

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:

```json
[
  {
    "id": "route-1",
    "points": [
      { "x": 100, "y": 200 },
      { "x": 300, "y": 200 },
      { "x": 500, "y": 200 }
    ]
  },
  {
    "id": "route-2",
    "points": [
      { "x": 150, "y": 400 },
      { "x": 450, "y": 350 }
    ]
  }
]
```

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:

- **SVG viewBox:** `0 0 1200 675`
- **X:** 0-1200 (—Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ)
- **Y:** 0-675 (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–û –∏ –ü–û–°–õ–ï

| –ê—Å–ø–µ–∫—Ç | –î–û | –ü–û–°–õ–ï |
|--------|-----|--------|
| **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤** | –¢–æ–ª—å–∫–æ /routes/ | /plans/*/  + /routes/ |
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–°–º–µ–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —ç—Ç–∞–∂–∞** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **Fallback —É—Ä–æ–≤–Ω–µ–π** | 2 | 4 |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ | –ü–æ–¥—Ä–æ–±–Ω–æ–µ |
| **–ì–∏–±–∫–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |

---

## üéâ –ò—Ç–æ–≥–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤  
‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã –≤ –ø–∞–ø–∫–∞—Ö –ø–ª–∞–Ω–æ–≤  
‚úÖ –°–º–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ —ç—Ç–∞–∂–∞  
‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π fallback  
‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ 8 —Ñ–∞–π–ª–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω—ã  
‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å  

### –ö–∞—á–µ—Å—Ç–≤–æ:
‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è  
‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å  
‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ì–∏–±–∫–æ—Å—Ç—å  
‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê UX  

---

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** AI Assistant (Cursor)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ  
**–í–µ—Ä—Å–∏—è:** 2.4  
**–î–∞—Ç–∞:** 07 –æ–∫—Ç—è–±—Ä—è 2025

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ú–∞—Ä—à—Ä—É—Ç—ã –ø–µ—à–µ—Ö–æ–¥–æ–≤ —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–∂–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞ "–î–≤–∏–∂–µ–Ω–∏–µ –ø–µ—à–µ—Ö–æ–¥–æ–≤"!

